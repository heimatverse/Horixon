<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Room <%= roomId %></title>
    <script>
      const roomId = "<%= roomId %>";
    </script>
    <script
      defer
      src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"
    ></script>
    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="/mera.js" defer></script>
    <style>
      #video-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, 300px);
        grid-auto-rows: 300px;
      }
      video {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
    </style>
  </head>
  <body>
    <h1>Welcome to Room <%= roomId %></h1>
    <p>This is where you would see other users' streams.</p>
    <p><a href="/">Go Back</a></p>

    <h2>Messages</h2>

    <div id="messages"></div>

    <input id="messageInput" />

    <button id="sendBtn">Send</button>

    <!-- <script>
      const roomId = "<%= roomId %>";
      const socket = io();

      // Join the room
      socket.emit("joinRoom", roomId, socket.id);

      // Listen for messages
      socket.on("chatMessage", (msg) => {
        console.log(`Received msg: ${msg.message}`);
        console.log(`Received roomid: ${msg.roomId}`);

        const messagesDiv = document.getElementById("messages");
        const messageElement = document.createElement("p");
        messageElement.textContent = msg.message;
        messagesDiv.appendChild(messageElement);
      });

      document.getElementById("sendBtn").addEventListener("click", function () {
        const message = document.getElementById("messageInput").value;
        console.log("message", message);
        console.log("id", socket.id);
        socket.emit("chatMessage", { roomId, message });
        document.getElementById("messageInput").value = "";
      });
    </script> -->

    <div id="video-grid"></div>
  </body>
</html>
